<div class="asset-flows-carousel">
  <!-- Header Section -->
  <div class="header-container">
    <div class="title-section">
      <h2 class="title">{{ title }}</h2>
      <button class="view-all-btn" (click)="onViewAll()">
        <span class="view-all-text">View All</span>
        <svg class="arrow-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 12L10 8L6 4" stroke="#0b41ad" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>

    <!-- Filter Controls -->
    <div class="filters-container">
      <!-- Timeframe Filter -->
      <div class="filter-group">
        <label class="filter-label">Timeframe:</label>
        <div class="filter-buttons">
          <button 
            *ngFor="let timeframe of timeframes"
            class="filter-btn" 
            [class.active]="selectedTimeframe === timeframe"
            (click)="setTimeframe(timeframe)">
            {{ timeframe }}
          </button>
        </div>
      </div>

      <!-- Asset Type Filter -->
      <div class="filter-group">
        <label class="filter-label">Asset Type:</label>
        <div class="filter-buttons asset-type">
          <button 
            *ngFor="let type of assetTypes"
            class="filter-btn" 
            [class.active]="selectedAssetType === type"
            (click)="setAssetType(type)">
            {{ type }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="filteredCards.length === 0" class="empty-state">
    <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="32" cy="32" r="32" fill="#f5f5f5"/>
      <path d="M32 20v24M20 32h24" stroke="#717182" stroke-width="3" stroke-linecap="round"/>
    </svg>
    <h3>No asset flows available</h3>
    <p>Try adjusting your filters to see different data</p>
  </div>

  <!-- Carousel Cards -->
  <div *ngIf="filteredCards.length > 0" class="carousel-container">
    <div class="cards-grid">
      <app-asset-flow-card
        *ngFor="let card of visibleCards"
        [card]="card"
        (viewDetails)="onViewDetails($event)"
        (download)="onDownload($event)"
        (moreOptions)="onMoreOptions($event)">
      </app-asset-flow-card>
    </div>
  </div>

  <!-- Carousel Navigation -->
  <div *ngIf="filteredCards.length > 0 && totalSlides > 1" class="navigation-container">
    <div class="pagination-dots">
      <span 
        *ngFor="let dot of [].constructor(totalSlides); let i = index"
        class="dot"
        [class.active]="i === currentSlideIndex"
        (click)="goToSlide(i)"
        [attr.aria-label]="'Go to slide ' + (i + 1)">
      </span>
    </div>
    <div class="nav-buttons">
      <button 
        class="nav-btn prev" 
        [disabled]="currentSlideIndex === 0"
        (click)="previousSlide()"
        aria-label="Previous slide">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M11.25 13.5L6.75 9L11.25 4.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <button 
        class="nav-btn next" 
        [disabled]="currentSlideIndex >= totalSlides - 1"
        (click)="nextSlide()"
        aria-label="Next slide">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6.75 4.5L11.25 9L6.75 13.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
  </div>
</div>
