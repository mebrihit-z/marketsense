<div class="featured-market-flows">
  <!-- Header Section -->
  <div class="header-container">
    <div class="title-section">
      <h2 class="title">{{ headerTitle }}</h2>
      <button class="view-all-btn" (click)="onViewAll()">
        <span class="view-all-text">View All</span>
        <img src="assets/icons/arrow-right-icon.svg" alt="Arrow Right" class="arrow-icon">
      </button>
    </div>

    <!-- Toggles Section -->
    <div class="toggles-container">
      <!-- Data Type Toggle -->
      <div class="toggle-group">
        <label class="toggle-label">Data Type:</label>
        <div class="toggle-buttons">
          <button 
            class="toggle-btn" 
            [class.active]="dataType === 'historical'"
            (click)="setDataType('historical')">
            Historical
          </button>
          <button 
            class="toggle-btn" 
            [class.active]="dataType === 'forecasted'"
            (click)="setDataType('forecasted')">
            Forecasted
          </button>
        </div>
      </div>

      <!-- Time Horizon Toggle -->
      <div class="toggle-group">
        <label class="toggle-label">Time Horizon:</label>
        <div class="toggle-buttons time-horizon">
          <button 
            *ngFor="let horizon of timeHorizons"
            class="toggle-btn" 
            [class.active]="selectedTimeHorizon === horizon"
            (click)="setTimeHorizon(horizon)">
            {{ horizon }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Carousel Cards -->
  <div class="carousel-container">
    <div class="cards-grid">
      <app-market-flow-card
        *ngFor="let card of visibleCards"
        [card]="card"
        (download)="onDownload($event)"
        (moreOptions)="onMoreOptions($event)"
        (askMarketSense)="onAskMarketSense($event)">
      </app-market-flow-card>
      
      <app-view-more-card
        *ngIf="showViewMoreInCurrentView"
        (viewMore)="onViewMore()">
      </app-view-more-card>
    </div>
  </div>

  <!-- Carousel Navigation -->
  <div class="navigation-container">
    <div class="pagination-dots">
      <span 
        *ngFor="let dot of [].constructor(totalSlides); let i = index"
        class="dot"
        [class.active]="i === currentSlideIndex"
        (click)="goToSlide(i)">
      </span>
    </div>
    <div class="nav-buttons">
      <button 
        class="nav-btn prev" 
        [disabled]="currentSlideIndex === 0"
        (click)="previousSlide()"
        aria-label="Previous slide">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M11.25 13.5L6.75 9L11.25 4.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <button 
        class="nav-btn next" 
        [disabled]="currentSlideIndex >= totalSlides - 1"
        (click)="nextSlide()"
        aria-label="Next slide">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6.75 4.5L11.25 9L6.75 13.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Ask MarketSense Modal -->
  <app-ask-marketsense-modal
    [isVisible]="showModal"
    [card]="selectedCard"
    (close)="onCloseModal()"
    (sendMessage)="onSendMessage($event)">
  </app-ask-marketsense-modal>
</div>

