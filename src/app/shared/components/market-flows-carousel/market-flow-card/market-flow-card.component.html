<div class="card">
  <!-- Card Header -->
  <div class="card-header">
    <h3 class="card-title">{{ card.title }}</h3>
    <div class="card-actions">
      <button class="icon-btn" (click)="onDownload()" aria-label="Download">
        <img src="assets/icons/download-icon.svg" alt="Download" class="download-icon">
      </button>
      <button class="icon-btn" (click)="onMoreOptions()" aria-label="More options">
        <img src="assets/icons/more-options-icon.svg" alt="More Options" class="more-options-icon">
      </button>
    </div>
  </div>

  <!-- Chart Section -->
  <div class="chart-container" [style.border-left-color]="card.borderColor">
    <!-- Background Chart (placeholder) -->
    <div class="chart-background">
      <div class="curve"></div>
    </div>
    <!-- Metric Display -->
    <div class="metric-display">
      <div class="value-container">
        <img *ngIf="card.valueColor === 'green'" src="assets/icons/up-curved-arrow-icon.svg" alt="Arrow" class="arrow-icon">
        <img *ngIf="card.valueColor === 'red'" src="assets/icons/down-curved-arrow-icon.svg" alt="Arrow" class="arrow-icon">
        <span class="value" [class.negative]="card.valueColor === 'red'" [class.positive]="card.valueColor === 'green'">
          {{ card.value }}
        </span>
      </div>
      <div class="badge" [class.negative]="card.percentageColor === 'red'" [class.positive]="card.percentageColor === 'green'">
        {{ card.percentageChange }}
      </div>
      <div class="metric-label">{{ card.metricLabel }}</div>
    </div>
  </div>

  <!-- Card Footer -->
  <div class="card-footer">
    <div class="footer-header">
      <div class="confidence-indicator">
        <span class="confidence-dot" [style.background-color]="getConfidenceColor(card.aiConfidence)"></span>
        <span class="confidence-text">AI Confidence</span>
      </div>
      <button class="ask-btn" (click)="onAskMarketSense()">
        <img src="assets/icons/sparkle-icon.svg" alt="Sparkle" class="sparkle-icon">
        <span class="ask-text">Ask MarketSense</span>
      </button>
    </div>
    <div class="divider"></div>
    <p class="description">{{ card.description }}</p>
  </div>
</div>

